(()=>{var e={};e.id=1016,e.ids=[1016],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},80262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o});var a=s(70260),r=s(28203),l=s(25155),n=s.n(l),d=s(67292),i={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);s.d(t,i);let o=["",{children:["(dashboard)",{children:["attendance",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28759)),"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/attendance/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58426)),"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/attendance/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(dashboard)/attendance/page",pathname:"/attendance",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},21712:(e,t,s)=>{Promise.resolve().then(s.bind(s,28759))},31440:(e,t,s)=>{Promise.resolve().then(s.bind(s,70659))},13522:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(73258).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},70659:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(45512),r=s(58009),l=s(4643),n=s(13522),d=s(19904),i=s(49656),o=s(14110);function c(){let{staff:e,attendanceRecords:t,fetchAttendance:s,clockIn:c,clockOut:m,deleteAttendance:x,addAttendance:u,updateAttendance:h,fetchStaff:p}=(0,o.L)(),[b,g]=(0,r.useState)("today"),[f,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(new Date().toISOString().slice(0,7)),[k,A]=(0,r.useState)("all"),[S,P]=(0,r.useState)(!1),[C,O]=(0,r.useState)({}),I=async()=>{if(j){y(!0);try{await c(j),v("")}catch(e){alert(e.message)}finally{y(!1)}}},z=async e=>{y(!0);try{let t=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=e.punchIn?0:8;await m(e.id,t,s)}catch(e){alert("Failed to clock out")}finally{y(!1)}},_=async e=>{if(e.preventDefault(),C.staffId){y(!0);try{C.id?await h(C.id,C):await u(C),P(!1),O({})}catch(e){alert("Failed to save record")}finally{y(!1)}}},D=new Date().toISOString().split("T")[0],q=t.filter(e=>e.date.startsWith(D)),M=t.filter(e=>"all"===k||e.staffId===k);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Attendance Management"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Track daily attendance, manage records, and view history."})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-1 flex gap-1 w-full max-w-md",children:[(0,a.jsx)("button",{className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${"today"===b?"bg-blue-50 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>g("today"),children:"Today's Overview"}),(0,a.jsx)("button",{className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${"history"===b?"bg-blue-50 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>g("history"),children:"History & Reports"})]}),(0,a.jsxs)("div",{className:"flex-1",children:["today"===b&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 text-blue-500"}),"Quick Clock In"]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Staff Member"}),(0,a.jsxs)("select",{className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:j,onChange:e=>v(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Choose staff..."}),e.filter(e=>"active"===e.status&&!q.some(t=>t.staffId===e.id&&!t.punchOut)).map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.position,")"]},e.id))]})]}),(0,a.jsx)("button",{onClick:I,disabled:!j||f,className:"w-full md:w-auto px-6 py-2.5 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 transition shadow",children:f?"Processing...":"Clock In Now"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100 font-semibold text-gray-700 flex justify-between items-center bg-gray-50/50",children:[(0,a.jsxs)("span",{children:["Today's Activity (",D,")"]}),(0,a.jsx)("span",{className:"text-xs font-normal text-gray-500",children:"Live Updates"})]}),(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4",children:"Staff Name"}),(0,a.jsx)("th",{className:"p-4",children:"Punch In"}),(0,a.jsx)("th",{className:"p-4",children:"Punch Out"}),(0,a.jsx)("th",{className:"p-4",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Action"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===q.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No active attendance records for today yet."})}):q.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"p-4 font-medium text-gray-900",children:e.staffName||"Unknown"}),(0,a.jsx)("td",{className:"p-4 font-mono text-gray-600",children:e.punchIn}),(0,a.jsx)("td",{className:"p-4 font-mono text-gray-500",children:e.punchOut||"-"}),(0,a.jsx)("td",{className:"p-4",children:e.punchOut?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(n.A,{className:"w-3 h-3 mr-1"})," Completed"]}):(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 animate-pulse",children:[(0,a.jsx)(l.A,{className:"w-3 h-3 mr-1"})," Active"]})}),(0,a.jsx)("td",{className:"p-4 text-right",children:!e.punchOut&&(0,a.jsx)("button",{onClick:()=>z(e),disabled:f,className:"text-xs bg-white text-amber-700 border border-amber-200 px-3 py-1.5 rounded-lg hover:bg-amber-50 font-medium transition-colors shadow-sm",children:"Clock Out"})})]},e.id))})]})]})]}),"history"===b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"w-full md:w-auto",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Month"}),(0,a.jsx)("input",{type:"month",className:"w-full p-2 border border-gray-200 rounded-lg text-sm",value:N,onChange:e=>w(e.target.value)})]}),(0,a.jsxs)("div",{className:"w-full md:w-auto",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Staff Filter"}),(0,a.jsxs)("select",{className:"w-full p-2 border border-gray-200 rounded-lg text-sm md:w-48",value:k,onChange:e=>A(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Staff"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsx)("div",{className:"ml-auto w-full md:w-auto",children:(0,a.jsx)("button",{onClick:()=>{P(!0),O({date:new Date().toISOString().split("T")[0]})},className:"w-full md:w-auto px-4 py-2 bg-gray-900 text-white text-sm rounded-lg hover:bg-gray-800 transition-colors shadow-lg",children:"+ Add Manual Record"})})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4",children:"Date"}),(0,a.jsx)("th",{className:"p-4",children:"Staff"}),(0,a.jsx)("th",{className:"p-4",children:"In / Out"}),(0,a.jsx)("th",{className:"p-4",children:"Total Hrs"}),(0,a.jsx)("th",{className:"p-4",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===M.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No records found for this period."})}):M.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"p-4",children:e.date}),(0,a.jsx)("td",{className:"p-4 font-medium text-gray-900",children:e.staffName}),(0,a.jsxs)("td",{className:"p-4 text-gray-600 font-mono text-xs",children:[e.punchIn," â€” ",e.punchOut||"..."]}),(0,a.jsx)("td",{className:"p-4 font-bold text-gray-800",children:e.totalHours.toFixed(2)}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"present"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status})}),(0,a.jsx)("td",{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{O(e),P(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Delete this record?")&&x(e.id)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]}),S&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:C.id?"Edit Attendance":"Add Attendance"})}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Staff Member"}),(0,a.jsxs)("select",{className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:C.staffId||"",onChange:e=>O({...C,staffId:e.target.value}),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Staff"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:C.date||"",onChange:e=>O({...C,date:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Punch In"}),(0,a.jsx)("input",{type:"time",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:C.punchIn||"",onChange:e=>O({...C,punchIn:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Punch Out"}),(0,a.jsx)("input",{type:"time",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:C.punchOut||"",onChange:e=>O({...C,punchOut:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Total Hours"}),(0,a.jsx)("input",{type:"number",step:"0.1",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:C.totalHours||0,onChange:e=>O({...C,totalHours:parseFloat(e.target.value)})})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,a.jsx)("button",{type:"button",onClick:()=>P(!1),className:"flex-1 py-2.5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-medium transition-colors shadow-lg",children:"Save Record"})]})]})]})})]})}},28759:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/attendance/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/attendance/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,4815,8077,2628,9046,2081],()=>s(80262));module.exports=a})();