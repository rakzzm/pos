(()=>{var e={};e.id=8002,e.ids=[8002],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},26570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>n});var s=r(70260),a=r(28203),d=r(25155),l=r.n(d),i=r(67292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let n=["",{children:["(dashboard)",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25021)),"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58426)),"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/orders/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/orders/page",pathname:"/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},40078:(e,t,r)=>{Promise.resolve().then(r.bind(r,25021))},3126:(e,t,r)=>{Promise.resolve().then(r.bind(r,78565))},21956:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(73258).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19904:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(73258).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},27998:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(73258).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},78565:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var s=r(45512),a=r(58009),d=r(73258);let l=(0,d.A)("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);var i=r(18741),o=r(61075),n=r(4643),c=r(13522),m=r(27998),x=r(80832),u=r(16873),p=r(19473);let h=(0,d.A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var g=r(87798),y=r(21956),b=r(19904),f=r(49656),j=r(45103),v=r(85316),w=r(20429),N=r(25902),k=r(59298),C=r(44352);function S(){let{orders:e,fetchOrders:t,addOrder:r,updateOrder:d,deleteOrder:S}=(0,v.x)(),{products:A,fetchProducts:P}=(0,w.K)(),[D,O]=(0,a.useState)(""),[T,_]=(0,a.useState)("all"),[I,M]=(0,a.useState)("all"),[F,E]=(0,a.useState)("all"),[q,z]=(0,a.useState)("all"),[U,$]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),[J,G]=(0,a.useState)(!1),[Q,W]=(0,a.useState)(!1),[K,Z]=(0,a.useState)(null),[H,X]=(0,a.useState)([]),[Y,B]=(0,a.useState)({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""}),V=(e,t)=>{let r=e.reduce((e,t)=>e+t.price*t.quantity,0),s=r-t,a=.1*s;return{subtotal:r,serviceTax:a,total:s+a}},ee=(e,t=!1)=>{let r=A.find(t=>t.id===e);if(!r)return;let s=t=>{let s=t.findIndex(t=>t.productId===e);if(!(s>=0))return[...t,{productId:r.id,name:r.name,price:r.price,quantity:1}];{let e=[...t];return e[s]={...e[s],quantity:e[s].quantity+1},e}};t?B(e=>({...e,items:s(e.items)})):X(e=>s(e))},et=(e,t=!1)=>{t?B(t=>({...t,items:t.items.filter(t=>t.productId!==e)})):X(t=>t.filter(t=>t.productId!==e))},er=(e,t,r=!1)=>{if(t<1)return;let s=r=>r.map(r=>r.productId===e?{...r,quantity:t}:r);r?B(e=>({...e,items:s(e.items)})):X(e=>s(e))},es=async()=>{let e=V(Y.items,Y.discount);try{await r({...Y,status:"pending",subtotal:e.subtotal,serviceTax:e.serviceTax,total:e.total,date:new Date().toISOString().slice(0,16).replace("T"," ")}),$(!1),B({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""})}catch(e){console.error("Failed to add order:",e)}},ea=e=>{Z(e),X(e.items),R(!0)},ed=e=>{Z(e),W(!0)},el=e=>{Z(e),G(!0)},ei=async()=>{if(!K)return;let e=V(H,K.discount);try{await d(K.id,{items:H,itemCount:H.reduce((e,t)=>e+t.quantity,0),subtotal:e.subtotal,serviceTax:e.serviceTax,total:e.total,status:K.status}),R(!1),Z(null),X([])}catch(e){console.error("Failed to update order:",e)}},eo=async()=>{if(K)try{await S(K.id),G(!1),Z(null)}catch(e){console.error("Failed to delete order:",e)}},en=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ec=e.filter(e=>{let t=e.orderNumber.toLowerCase().includes(D.toLowerCase())||e.customerName.toLowerCase().includes(D.toLowerCase()),r="all"===T||e.status===T,s="all"===F||e.paymentMethod===F,a="all"===q||(e.source||"POS")===q,d=!0;if("all"!==I){let t=new Date(e.date),r=new Date,s=new Date(r);switch(s.setDate(s.getDate()-1),I){case"today":d=t.toDateString()===r.toDateString();break;case"yesterday":d=t.toDateString()===s.toDateString();break;case"week":{let e=new Date(r);e.setDate(e.getDate()-7),d=t>=e}}}return t&&r&&s&&d&&a}),em={total:e.length,pending:e.filter(e=>"pending"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length,todayRevenue:e.filter(e=>"completed"===e.status&&new Date(e.date).toDateString()===new Date().toDateString()).reduce((e,t)=>e+t.total,0)},ex=(e=!1)=>{let t=e?Y.items:H,r=V(t,e?Y.discount:K?.discount||0);return(0,s.jsxs)("div",{className:"flex gap-8",children:[(0,s.jsxs)("div",{className:"w-[45%] space-y-4",children:[e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Customer Name"}),(0,s.jsx)("input",{type:"text",value:Y.customerName,onChange:e=>B(t=>({...t,customerName:e.target.value})),className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:ring-orders-primary focus:border-orders-primary",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Member ID (Optional)"}),(0,s.jsx)("input",{type:"text",value:Y.memberId,onChange:e=>B(t=>({...t,memberId:e.target.value})),className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:ring-orders-primary focus:border-orders-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),(0,s.jsxs)("select",{value:Y.paymentMethod,onChange:e=>B(t=>({...t,paymentMethod:e.target.value})),className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:ring-orders-primary focus:border-orders-primary",children:[(0,s.jsx)("option",{value:"cash",children:"Cash"}),(0,s.jsx)("option",{value:"card",children:"Card"})]})]})]}),!e&&K&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Order Status"}),(0,s.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>Z(e=>({...e,status:"pending"})),className:`px-4 py-2 rounded-xl transition-all duration-300 ${"pending"===K.status?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending"}),(0,s.jsx)("button",{onClick:()=>Z(e=>({...e,status:"completed"})),className:`px-4 py-2 rounded-xl transition-all duration-300 ${"completed"===K.status?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Completed"}),(0,s.jsx)("button",{onClick:()=>Z(e=>({...e,status:"cancelled"})),className:`px-4 py-2 rounded-xl transition-all duration-300 ${"cancelled"===K.status?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancelled"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Products"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-[500px] overflow-y-auto",children:A.map(t=>(0,s.jsxs)("button",{onClick:()=>ee(t.id,e),className:"flex items-center p-3 border rounded-xl hover:bg-gray-50 hover:border-orders-primary transition-all duration-300 group",children:[(0,s.jsx)(j.default,{src:t.image_url,alt:t.name,className:"rounded-lg object-cover group-hover:scale-105 transition-transform duration-300",width:64,height:64}),(0,s.jsxs)("div",{className:"ml-3 text-left",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:t.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",t.price.toFixed(2)]})]})]},t.id))})]})]}),(0,s.jsxs)("div",{className:"w-[55%] space-y-4",children:[(0,s.jsxs)("div",{className:"border rounded-xl p-4 space-y-4 max-h-[400px] overflow-y-auto bg-gray-50",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Order Items"}),t.map(t=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)("button",{onClick:()=>et(t.productId,e),className:"text-red-500 hover:text-red-700 p-1 rounded-lg hover:bg-red-50 transition-colors",children:(0,s.jsx)(l,{className:"h-5 w-5"})}),(0,s.jsx)("span",{className:"text-sm flex-1",children:t.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>er(t.productId,t.quantity-1,e),className:"text-gray-500 hover:text-gray-700 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors",children:"-"}),(0,s.jsx)("input",{type:"number",min:"1",value:t.quantity,onChange:r=>er(t.productId,parseInt(r.target.value)||1,e),className:"w-16 text-center border rounded-lg"}),(0,s.jsx)("button",{onClick:()=>er(t.productId,t.quantity+1,e),className:"text-gray-500 hover:text-gray-700 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors",children:"+"})]}),(0,s.jsxs)("span",{className:"text-sm font-medium w-24 text-right",children:["₹",(t.price*t.quantity).toFixed(2)]})]})]},t.productId))]}),(0,s.jsxs)("div",{className:"border rounded-xl p-4 space-y-4 bg-gradient-to-br from-orders-primary/5 to-orders-secondary/5",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsxs)("span",{children:["₹",r.subtotal.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Discount:"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:e?Y.discount:K?.discount||0,onChange:t=>{let r=parseFloat(t.target.value)||0;e&&B(e=>({...e,discount:r}))},className:"w-20 text-right border rounded-lg px-2 py-1"})})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Service Tax (10%):"}),(0,s.jsxs)("span",{children:["₹",r.serviceTax.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-medium text-lg mt-4 pt-4 border-t",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{className:"text-orders-primary",children:["₹",r.total.toFixed(2)]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 mt-6 pt-4 border-t",children:[(0,s.jsx)("button",{onClick:()=>{e?($(!1),B({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""})):(R(!1),Z(null),X([]))},className:"px-6 py-3 text-gray-700 hover:text-gray-900 font-medium",children:"Cancel"}),(0,s.jsx)("button",{onClick:e?es:ei,disabled:0===t.length,className:"px-6 py-3 bg-gradient-to-r from-orders-primary to-orders-secondary text-white rounded-xl hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:e?"Create Order":"Update Order"})]})]})]})};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orders-bg via-orders-bg/30 to-orders-bg/80 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-orders-primary/20 to-orders-secondary/20 rounded-full blur-3xl animate-float"}),(0,s.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-orders-accent/20 to-orders-primary/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-orders-primary/10 to-orders-secondary/10 rounded-full blur-3xl animate-pulse-slow"}),(0,s.jsx)("div",{className:"absolute top-20 right-20 w-32 h-32 bg-shimmer-gradient bg-[length:200%_100%] rounded-full animate-shimmer opacity-30"}),(0,s.jsx)("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-radial-shine rounded-full animate-glow"})]}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orders-primary to-orders-secondary bg-clip-text text-transparent mb-2",children:"Order Management"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage customer orders and track sales"})]}),(0,s.jsxs)("button",{onClick:()=>$(!0),className:"bg-gradient-to-r from-orders-primary to-orders-secondary text-white px-6 py-3 rounded-xl flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"New Order"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-orders-primary to-orders-secondary rounded-2xl p-6 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white/80 text-sm font-medium",children:"Total Orders"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:em.total})]}),(0,s.jsx)(o.A,{className:"h-12 w-12 text-white/30"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Pending"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:em.pending})]}),(0,s.jsx)(n.A,{className:"h-12 w-12 text-blue-300"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Completed"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:em.completed})]}),(0,s.jsx)(c.A,{className:"h-12 w-12 text-green-300"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Cancelled"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-600",children:em.cancelled})]}),(0,s.jsx)(m.A,{className:"h-12 w-12 text-red-300"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Today's Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-orders-primary",children:["₹",em.todayRevenue.toFixed(2)]})]}),(0,s.jsx)(x.A,{className:"h-12 w-12 text-orders-primary/30"})]})})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search orders...",value:D,onChange:e=>O(e.target.value),className:"pl-10 pr-4 py-3 border border-gray-300 rounded-xl w-full focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("select",{value:T,onChange:e=>_(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,s.jsxs)("select",{value:I,onChange:e=>M(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,s.jsx)("option",{value:"all",children:"All Dates"}),(0,s.jsx)("option",{value:"today",children:"Today"}),(0,s.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,s.jsx)("option",{value:"week",children:"This Week"})]}),(0,s.jsxs)("select",{value:F,onChange:e=>E(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,s.jsx)("option",{value:"all",children:"All Payments"}),(0,s.jsx)("option",{value:"cash",children:"Cash"}),(0,s.jsx)("option",{value:"card",children:"Card"})]}),(0,s.jsxs)("select",{value:q,onChange:e=>z(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,s.jsx)("option",{value:"all",children:"All Sources"}),(0,s.jsx)("option",{value:"POS",children:"POS"}),(0,s.jsx)("option",{value:"QR",children:"QR Code"})]}),(0,s.jsxs)("button",{onClick:()=>{let t=e.map(e=>({"Order Number":e.orderNumber,Customer:e.customerName,"Member ID":e.memberId||"N/A",Items:e.itemCount,Subtotal:e.subtotal,Discount:e.discount,"Service Tax":e.serviceTax,Total:e.total,Status:e.status,"Payment Method":e.paymentMethod,Date:e.date})),r=C.Wp.json_to_sheet(t),s=C.Wp.book_new();C.Wp.book_append_sheet(s,r,"Orders"),C._h(s,`orders_${new Date().toISOString().split("T")[0]}.xlsx`)},className:"bg-gradient-to-r from-orders-primary to-orders-secondary text-white px-6 py-3 rounded-xl flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,s.jsx)(p.A,{className:"h-5 w-5"}),"Export"]})]})]})}),(0,s.jsx)("div",{className:"bg-white shadow-lg rounded-2xl overflow-hidden border border-gray-100",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-orders-primary/10 to-orders-secondary/10",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ec.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.orderNumber}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,s.jsx)(h,{className:"w-3 h-3 mr-1"}),e.paymentMethod]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orders-primary to-orders-secondary rounded-full flex items-center justify-center text-white font-bold mr-3",children:e.customerName.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName}),e.memberId&&(0,s.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,s.jsx)(g.A,{className:"w-3 h-3 mr-1"}),e.memberId]})]})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.itemCount," items"]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["₹",e.total.toFixed(2)]}),e.discount>0&&(0,s.jsxs)("div",{className:"text-xs text-green-600",children:["-₹",e.discount.toFixed(2)," discount"]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-bold rounded-md border ${"QR"===e.source?"bg-purple-50 text-purple-700 border-purple-200":"bg-cyan-50 text-cyan-700 border-cyan-200"}`,children:e.source||"POS"})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ${en(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>ed(e),className:"text-orders-primary hover:text-orders-secondary p-2 rounded-lg hover:bg-orders-primary/10 transition-colors",children:(0,s.jsx)(y.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>ea(e),className:"text-orders-primary hover:text-orders-secondary p-2 rounded-lg hover:bg-orders-primary/10 transition-colors",children:(0,s.jsx)(b.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>el(e),className:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),(0,s.jsx)(N.a,{isOpen:U,onClose:()=>{$(!1),B({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""})},title:"New Order",size:"large",children:ex(!0)}),(0,s.jsx)(N.a,{isOpen:L,onClose:()=>{R(!1),Z(null),X([])},title:"Edit Order",size:"large",children:ex(!1)}),(0,s.jsx)(N.a,{isOpen:Q,onClose:()=>{W(!1),Z(null)},title:"Order Details",size:"large",children:K&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Order Number"}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-900",children:K.orderNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Customer"}),(0,s.jsx)("div",{className:"text-lg font-medium text-gray-900",children:K.customerName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,s.jsx)("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ${en(K.status)}`,children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,s.jsx)("div",{className:"text-lg font-medium text-gray-900",children:K.date})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Payment Method"}),(0,s.jsx)("div",{className:"text-lg font-medium text-gray-900 capitalize",children:K.paymentMethod})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-orders-primary",children:["₹",K.total.toFixed(2)]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Items"}),(0,s.jsx)("div",{className:"space-y-2",children:K.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["₹",e.price.toFixed(2)," each"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Qty: ",e.quantity]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["₹",(e.price*e.quantity).toFixed(2)]})]})]},t))})]})]})}),(0,s.jsx)(k.T,{isOpen:J,onClose:()=>G(!1),onConfirm:eo,title:"Delete Order",message:"Are you sure you want to delete this order? This action cannot be undone."})]})]})}},59298:(e,t,r)=>{"use strict";r.d(t,{T:()=>d});var s=r(45512);r(58009);let a=(0,r(73258).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function d({isOpen:e,onClose:t,onConfirm:r,title:d,message:l}){return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)(a,{className:"h-6 w-6 text-red-500 mr-2"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:d})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:l}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{r(),t()},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}):null}},54810:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});let s=(0,r(80159).vt)(e=>({members:[],loading:!1,error:null,fetchMembers:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/members");if(!t.ok)throw Error("Failed to fetch members");let r=(await t.json()).map(e=>({...e,joinDate:new Date(e.joinDate).toISOString().split("T")[0]}));e({members:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addMember:async t=>{e({loading:!0,error:null});try{let r=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create member");let s=await r.json(),a={...s,joinDate:new Date(s.joinDate).toISOString().split("T")[0]};return e(e=>({members:[...e.members,a]})),a}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateMember:async(t,r)=>{e({loading:!0,error:null});try{let s=await fetch(`/api/members/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error("Failed to update member");let a=await s.json(),d={...a,joinDate:new Date(a.joinDate).toISOString().split("T")[0]};e(e=>({members:e.members.map(e=>e.id===t?d:e)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},deleteMember:async t=>{e({loading:!0,error:null});try{if(!(await fetch(`/api/members/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete member");e(e=>({members:e.members.filter(e=>e.id!==t)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}}}))},85316:(e,t,r)=>{"use strict";r.d(t,{x:()=>d});var s=r(80159),a=r(54810);let d=(0,s.vt)((e,t)=>({orders:[],loading:!1,error:null,fetchOrders:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/orders");if(!t.ok)throw Error("Failed to fetch orders");let r=(await t.json()).map(e=>({...e,itemCount:e.items.reduce((e,t)=>e+t.quantity,0),date:new Date(e.date).toLocaleString()}));e({orders:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addOrder:async t=>{e({loading:!0,error:null});try{let r={...t,orderNumber:`ORD-${Date.now()}`},s=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error("Failed to create order");let a=await s.json(),d={...a,itemCount:a.items.reduce((e,t)=>e+t.quantity,0),date:new Date(a.date).toLocaleString()};e(e=>({orders:[d,...e.orders]})),"completed"===d.status&&d.memberId&&await l(d.memberId,d.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrder:async(r,s)=>{e({loading:!0,error:null});try{let a=await fetch(`/api/orders/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw Error("Failed to update order");let d=await a.json(),i={...d,itemCount:d.items.reduce((e,t)=>e+t.quantity,0),date:new Date(d.date).toLocaleString()},o=t().orders.find(e=>e.id===r);e(e=>({orders:e.orders.map(e=>e.id===r?i:e)})),"completed"===s.status&&o?.status!=="completed"&&i.memberId&&await l(i.memberId,i.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrderStatus:async(r,s)=>{e({loading:!0,error:null});try{let a=await fetch(`/api/orders/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});if(!a.ok)throw Error("Failed to update order status");let d=await a.json(),i={...d,itemCount:d.items.reduce((e,t)=>e+t.quantity,0),date:new Date(d.date).toLocaleString()},o=t().orders.find(e=>e.id===r);e(e=>({orders:e.orders.map(e=>e.id===r?i:e)})),"completed"===s&&i.memberId&&o?.status!=="completed"&&await l(i.memberId,i.total)}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteOrder:async t=>{e({loading:!0,error:null});try{if(!(await fetch(`/api/orders/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete order");e(e=>({orders:e.orders.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}));async function l(e,t){let r=a.b.getState(),s=r.members.find(t=>t.memberId===e);if(s){let e=1*Math.floor(t/100);await r.updateMember(s.id,{points:s.points+e,totalSpent:s.totalSpent+t})}}},20429:(e,t,r)=>{"use strict";r.d(t,{K:()=>s});let s=(0,r(80159).vt)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/products");if(!t.ok)throw Error("Failed to fetch products");let r=(await t.json()).map(e=>({...e,image_url:e.imageUrl||e.image_url,cost_price:e.costPrice||e.cost_price,profit_margin:e.profitMargin||e.profit_margin,is_featured:e.isFeatured,is_available:e.isAvailable}));e({products:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addProduct:async t=>{e({loading:!0,error:null});try{let r=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create product");let a=await r.json(),d={...a,image_url:a.imageUrl,cost_price:a.costPrice,profit_margin:a.profitMargin,is_featured:a.isFeatured,is_available:a.isAvailable};e(e=>({products:[d,...e.products]})),await s.getState().fetchProducts()}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateProduct:async(t,r)=>{e({loading:!0,error:null});try{let s=await fetch(`/api/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error("Failed to update product");let a=await s.json(),d={...a,image_url:a.imageUrl,cost_price:a.costPrice,profit_margin:a.profitMargin,is_featured:a.isFeatured,is_available:a.isAvailable};e(e=>({products:e.products.map(e=>e.id===t?d:e)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteProduct:async t=>{e({loading:!0,error:null});try{if(!(await fetch(`/api/products/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete product");e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}))},25021:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/orders/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/rakzzm/Documents/Applications/Advakkad POS Application/src/app/(dashboard)/orders/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,4815,8077,2628,5781,3424,9046,1811],()=>r(26570));module.exports=s})();