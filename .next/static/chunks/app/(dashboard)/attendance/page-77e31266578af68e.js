(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1016],{95144:(e,t,s)=>{Promise.resolve().then(s.bind(s,42717))},50878:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82800).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},66889:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82800).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},42717:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),l=s(12115),r=s(66889),d=s(50878),n=s(26764),i=s(45686),c=s(24114);function o(){let{staff:e,attendanceRecords:t,fetchAttendance:s,clockIn:o,clockOut:x,deleteAttendance:m,addAttendance:u,updateAttendance:h,fetchStaff:g}=(0,c.L)(),[b,f]=(0,l.useState)("today"),[p,y]=(0,l.useState)(!1),[j,N]=(0,l.useState)(""),[v,w]=(0,l.useState)(new Date().toISOString().slice(0,7)),[k,S]=(0,l.useState)("all"),[C,A]=(0,l.useState)(!1),[I,O]=(0,l.useState)({});(0,l.useEffect)(()=>{g(),s()},[]),(0,l.useEffect)(()=>{"history"===b&&s(v)},[v,b]);let D=async()=>{if(j){y(!0);try{await o(j),N("")}catch(e){alert(e.message)}finally{y(!1)}}},T=async e=>{y(!0);try{let t=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=e.punchIn?0:8;await x(e.id,t,s)}catch(e){alert("Failed to clock out")}finally{y(!1)}},E=async e=>{if(e.preventDefault(),I.staffId){y(!0);try{I.id?await h(I.id,I):await u(I),A(!1),O({})}catch(e){alert("Failed to save record")}finally{y(!1)}}},H=new Date().toISOString().split("T")[0],M=t.filter(e=>e.date.startsWith(H)),P=t.filter(e=>"all"===k||e.staffId===k);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Attendance Management"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Track daily attendance, manage records, and view history."})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-1 flex gap-1 w-full max-w-md",children:[(0,a.jsx)("button",{className:"flex-1 py-2 text-sm font-medium rounded-lg transition-all ".concat("today"===b?"bg-blue-50 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),onClick:()=>f("today"),children:"Today's Overview"}),(0,a.jsx)("button",{className:"flex-1 py-2 text-sm font-medium rounded-lg transition-all ".concat("history"===b?"bg-blue-50 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),onClick:()=>f("history"),children:"History & Reports"})]}),(0,a.jsxs)("div",{className:"flex-1",children:["today"===b&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"w-5 h-5 text-blue-500"}),"Quick Clock In"]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Staff Member"}),(0,a.jsxs)("select",{className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:j,onChange:e=>N(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Choose staff..."}),e.filter(e=>"active"===e.status&&!M.some(t=>t.staffId===e.id&&!t.punchOut)).map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.position,")"]},e.id))]})]}),(0,a.jsx)("button",{onClick:D,disabled:!j||p,className:"w-full md:w-auto px-6 py-2.5 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 transition shadow",children:p?"Processing...":"Clock In Now"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100 font-semibold text-gray-700 flex justify-between items-center bg-gray-50/50",children:[(0,a.jsxs)("span",{children:["Today's Activity (",H,")"]}),(0,a.jsx)("span",{className:"text-xs font-normal text-gray-500",children:"Live Updates"})]}),(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4",children:"Staff Name"}),(0,a.jsx)("th",{className:"p-4",children:"Punch In"}),(0,a.jsx)("th",{className:"p-4",children:"Punch Out"}),(0,a.jsx)("th",{className:"p-4",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Action"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===M.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No active attendance records for today yet."})}):M.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"p-4 font-medium text-gray-900",children:e.staffName||"Unknown"}),(0,a.jsx)("td",{className:"p-4 font-mono text-gray-600",children:e.punchIn}),(0,a.jsx)("td",{className:"p-4 font-mono text-gray-500",children:e.punchOut||"-"}),(0,a.jsx)("td",{className:"p-4",children:e.punchOut?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(d.A,{className:"w-3 h-3 mr-1"})," Completed"]}):(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 animate-pulse",children:[(0,a.jsx)(r.A,{className:"w-3 h-3 mr-1"})," Active"]})}),(0,a.jsx)("td",{className:"p-4 text-right",children:!e.punchOut&&(0,a.jsx)("button",{onClick:()=>T(e),disabled:p,className:"text-xs bg-white text-amber-700 border border-amber-200 px-3 py-1.5 rounded-lg hover:bg-amber-50 font-medium transition-colors shadow-sm",children:"Clock Out"})})]},e.id))})]})]})]}),"history"===b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"w-full md:w-auto",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Month"}),(0,a.jsx)("input",{type:"month",className:"w-full p-2 border border-gray-200 rounded-lg text-sm",value:v,onChange:e=>w(e.target.value)})]}),(0,a.jsxs)("div",{className:"w-full md:w-auto",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Staff Filter"}),(0,a.jsxs)("select",{className:"w-full p-2 border border-gray-200 rounded-lg text-sm md:w-48",value:k,onChange:e=>S(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Staff"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsx)("div",{className:"ml-auto w-full md:w-auto",children:(0,a.jsx)("button",{onClick:()=>{A(!0),O({date:new Date().toISOString().split("T")[0]})},className:"w-full md:w-auto px-4 py-2 bg-gray-900 text-white text-sm rounded-lg hover:bg-gray-800 transition-colors shadow-lg",children:"+ Add Manual Record"})})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4",children:"Date"}),(0,a.jsx)("th",{className:"p-4",children:"Staff"}),(0,a.jsx)("th",{className:"p-4",children:"In / Out"}),(0,a.jsx)("th",{className:"p-4",children:"Total Hrs"}),(0,a.jsx)("th",{className:"p-4",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===P.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No records found for this period."})}):P.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"p-4",children:e.date}),(0,a.jsx)("td",{className:"p-4 font-medium text-gray-900",children:e.staffName}),(0,a.jsxs)("td",{className:"p-4 text-gray-600 font-mono text-xs",children:[e.punchIn," â€” ",e.punchOut||"..."]}),(0,a.jsx)("td",{className:"p-4 font-bold text-gray-800",children:e.totalHours.toFixed(2)}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("present"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.status})}),(0,a.jsx)("td",{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{O(e),A(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:(0,a.jsx)(n.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Delete this record?")&&m(e.id)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]}),C&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:I.id?"Edit Attendance":"Add Attendance"})}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Staff Member"}),(0,a.jsxs)("select",{className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:I.staffId||"",onChange:e=>O({...I,staffId:e.target.value}),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Staff"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:I.date||"",onChange:e=>O({...I,date:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Punch In"}),(0,a.jsx)("input",{type:"time",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:I.punchIn||"",onChange:e=>O({...I,punchIn:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Punch Out"}),(0,a.jsx)("input",{type:"time",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:I.punchOut||"",onChange:e=>O({...I,punchOut:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Total Hours"}),(0,a.jsx)("input",{type:"number",step:"0.1",className:"w-full p-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500",value:I.totalHours||0,onChange:e=>O({...I,totalHours:parseFloat(e.target.value)})})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,a.jsx)("button",{type:"button",onClick:()=>A(!1),className:"flex-1 py-2.5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-medium transition-colors shadow-lg",children:"Save Record"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3942,8441,1517,7358],()=>t(95144)),_N_E=e.O()}]);