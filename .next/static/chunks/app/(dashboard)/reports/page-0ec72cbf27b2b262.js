(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{83686:()=>{},32383:()=>{},10026:(e,t,s)=>{Promise.resolve().then(s.bind(s,84221))},84221:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(95155),l=s(12115),r=s(58581),n=s(94973),i=s(15255),d=s(12800),o=s(66963),c=s(27112),x=s(86354),m=s(16161),h=s(22175),u=s(90457),g=s(67732),p=s(77594),v=s(44857),j=s(49688),f=s(86659),y=s(73453),N=s(8464),w=s(87e3),b=s(7660),S=s(10142),F=s(92340),C=s.n(F);let _=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6"],A=e=>"₹".concat(e.toFixed(2));function k(){let[e,t]=(0,l.useState)("week"),[s,F]=(0,l.useState)(!1),{products:k}=(0,y.K)(),{orders:T}=(0,N.x)(),{summary:D,loading:z,error:E,calculateSummary:P}=(0,w.X)(),[R,W]=(0,l.useState)([]),[G,O]=(0,l.useState)([]),[I,V]=(0,l.useState)([]);(0,l.useEffect)(()=>{P(e),B()},[e,k,T]);let B=()=>{W(Array(7).fill(0).map((e,t)=>{let s=new Date;s.setDate(s.getDate()-t);let a=T.filter(e=>new Date(e.date).toDateString()===s.toDateString());return{date:s.toLocaleDateString("en-US",{weekday:"short"}),sales:a.reduce((e,t)=>e+t.total,0),orders:a.length}}).reverse()),O(Object.entries(k.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+T.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.total,0),e),{})).map(e=>{let[t,s]=e;return{name:t,value:s}})),V(k.map(e=>{let t=T.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.total,0);return{name:e.name,units:Math.floor(t/e.price),revenue:t,growth:(30*Math.random()-10).toFixed(1)}}).sort((e,t)=>t.revenue-e.revenue).slice(0,5))},K=()=>{let t=b.Wp.book_new(),s=[["Metric","Value"],["Gross Amount",A((null==D?void 0:D.grossAmount)||0)],["Net Sales",A((null==D?void 0:D.netSales)||0)],["Discounts",A((null==D?void 0:D.discounts)||0)],["Tax",A((null==D?void 0:D.tax)||0)],["Charges",A((null==D?void 0:D.charges)||0)],["Net Total",A((null==D?void 0:D.netTotal)||0)],["Transaction Count",(null==D?void 0:D.transactionCount)||0],["Average Value",A((null==D?void 0:D.averageValue)||0)],["Daily Average Sales",A((null==D?void 0:D.dailyAverageSales)||0)]],a=b.Wp.aoa_to_sheet(s);b.Wp.book_append_sheet(t,a,"Summary");let l=b.Wp.json_to_sheet(R);b.Wp.book_append_sheet(t,l,"Sales Trend");let r=b.Wp.json_to_sheet(G);b.Wp.book_append_sheet(t,r,"Categories");let n=b.Wp.json_to_sheet(I);b.Wp.book_append_sheet(t,n,"Top Products"),b._h(t,"sales_report_".concat(e,"_").concat(new Date().toISOString().split("T")[0],".xlsx"))},M=()=>{var t,s,a,l,r;let n=new S.default,i=n.internal.pageSize.width,d=n.internal.pageSize.height,o="#87CEEB",c="#FFB6C8",x="#1D63FF",m=(e,t)=>{n.setFillColor(o),n.rect(0,e,i,t,"F"),n.setFillColor(c),n.setGState(new n.GState({opacity:.3})),n.rect(0,e,i,t,"F"),n.setGState(new n.GState({opacity:1}))};m(0,40),n.setFontSize(24),n.setTextColor(x),n.text("Sales Report",i/2,20,{align:"center"}),n.setFontSize(12),n.text("Period: ".concat(e),i/2,30,{align:"center"});let h=50;n.setFontSize(16),n.setTextColor(x),n.text("Financial Summary",14,h);let u=[["Gross Amount",A(null!==(t=null==D?void 0:D.grossAmount)&&void 0!==t?t:0)],["Net Sales",A(null!==(s=null==D?void 0:D.netSales)&&void 0!==s?s:0)],["Discounts",A(null!==(a=null==D?void 0:D.discounts)&&void 0!==a?a:0)],["Tax",A(null!==(l=null==D?void 0:D.tax)&&void 0!==l?l:0)],["Net Total",A(null!==(r=null==D?void 0:D.netTotal)&&void 0!==r?r:0)]];C()(n,{startY:h+5,head:[["Metric","Value"]],body:u,theme:"grid",styles:{fillColor:o,textColor:x,fontSize:10,cellPadding:5},alternateRowStyles:{fillColor:c},headStyles:{fillColor:x,textColor:"#FFFFFF",fontSize:12,fontStyle:"bold"}}),h=n.lastAutoTable.finalY+20,n.addPage(),m(0,d),n.setFontSize(16),n.setTextColor(x),n.text("Sales Trend Analysis",14,20),document.querySelector(".sales-trend-chart"),h=140,n.setFontSize(16),n.text("Sales by Category",14,h);let g=G.map(e=>{var t;return[e.name,A(e.value),"".concat((e.value/(null!==(t=null==D?void 0:D.grossAmount)&&void 0!==t?t:1)*100).toFixed(1),"%")]});C()(n,{startY:h+5,head:[["Category","Revenue","Percentage"]],body:g,theme:"grid",styles:{fillColor:o,textColor:x,fontSize:10},alternateRowStyles:{fillColor:c},headStyles:{fillColor:x,textColor:"#FFFFFF",fontSize:12,fontStyle:"bold"}}),n.addPage(),m(0,d),n.setFontSize(16),n.setTextColor(x),n.text("Top Performing Products",14,20),C()(n,{startY:25,head:[["Product","Units","Revenue","Growth"]],body:I.map(e=>[e.name,e.units,A(e.revenue),"".concat(e.growth,"%")]),theme:"grid",styles:{fillColor:o,textColor:x,fontSize:10},alternateRowStyles:{fillColor:c},headStyles:{fillColor:x,textColor:"#FFFFFF",fontSize:12,fontStyle:"bold"}});let p=new Date().toLocaleString();n.setFontSize(8),n.setTextColor(x),n.text("Generated on: ".concat(p),i-15,d-10,{align:"right"}),n.save("sales_report_".concat(e,"_").concat(new Date().toISOString().split("T")[0],".pdf"))};return z?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-accent animate-spin"})}):E?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-accent",children:E})}):D?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-reports-bg via-reports-bg/30 to-reports-bg/80 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-reports-primary/20 to-reports-secondary/20 rounded-full blur-3xl animate-float"}),(0,a.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-reports-accent/20 to-reports-primary/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-reports-primary/10 to-reports-secondary/10 rounded-full blur-3xl animate-pulse-slow"}),(0,a.jsx)("div",{className:"absolute top-20 right-20 w-32 h-32 bg-shimmer-gradient bg-[length:200%_100%] rounded-full animate-shimmer opacity-30"}),(0,a.jsx)("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-radial-shine rounded-full animate-glow"})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"border border-gray-300 rounded-md px-4 py-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,a.jsx)("option",{value:"week",children:"Last Week"}),(0,a.jsx)("option",{value:"month",children:"Last Month"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>F(!s),className:"bg-accent text-white px-4 py-2 rounded-md flex items-center gap-2 hover:bg-accent/90",children:[(0,a.jsx)(v.A,{className:"h-5 w-5"}),"Export Report"]}),s&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>{K(),F(!1)},className:"w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Export as Excel"]}),(0,a.jsxs)("button",{onClick:()=>{M(),F(!1)},className:"w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),"Export as PDF"]})]})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Sales"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-accent",children:A(D.grossAmount)}),(0,a.jsx)("dd",{className:"text-sm text-green-600",children:"+12.5% vs last period"})]})})})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Orders"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-accent",children:D.transactionCount}),(0,a.jsx)("dd",{className:"text-sm text-green-600",children:"+8.2% vs last period"})]})})})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Average Order Value"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-accent",children:A(D.averageValue)}),(0,a.jsx)("dd",{className:"text-sm text-red-600",children:"-2.1% vs last period"})]})})})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Daily Average Sales"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-accent",children:A(D.dailyAverageSales)}),(0,a.jsx)("dd",{className:"text-sm text-green-600",children:"+15.8% vs last period"})]})})})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sales & Orders Trend"}),(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(r.u,{width:"100%",height:"100%",children:(0,a.jsxs)(n.b,{data:R,children:[(0,a.jsx)(i.d,{strokeDasharray:"3 3"}),(0,a.jsx)(d.W,{dataKey:"date"}),(0,a.jsx)(o.h,{yAxisId:"left"}),(0,a.jsx)(o.h,{yAxisId:"right",orientation:"right"}),(0,a.jsx)(c.m,{}),(0,a.jsx)(x.s,{}),(0,a.jsx)(m.N,{yAxisId:"left",type:"monotone",dataKey:"sales",stroke:"#4F46E5",name:"Sales (₹)"}),(0,a.jsx)(m.N,{yAxisId:"right",type:"monotone",dataKey:"orders",stroke:"#059669",name:"Orders"})]})})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sales by Category"}),(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(r.u,{width:"100%",height:"100%",children:(0,a.jsxs)(h.r,{children:[(0,a.jsx)(u.F,{data:G,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:!0,children:G.map((e,t)=>(0,a.jsx)(g.f,{fill:_[t%_.length]},"cell-".concat(t)))}),(0,a.jsx)(c.m,{formatter:e=>A(e)}),(0,a.jsx)(x.s,{})]})})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Selling Products"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Units Sold"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Growth"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.units}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(e.revenue)}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[Number(e.growth)>0?"+":"",e.growth,"%"]})]},t))})]})})]})]})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[3524,3930,3712,5982,8113,4828,8441,1517,7358],()=>t(10026)),_N_E=e.O()}]);