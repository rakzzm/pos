(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8002],{83686:()=>{},32383:()=>{},37378:(e,t,r)=>{Promise.resolve().then(r.bind(r,79136))},50878:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},66889:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},44857:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},92598:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},14081:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},33473:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20853:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},26764:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},45686:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},86878:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},1466:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21610:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},40767:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},79136:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var a=r(95155),s=r(12115),l=r(82800);let d=(0,l.A)("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);var i=r(33473),o=r(14081),n=r(66889),c=r(50878),m=r(21610),x=r(86878),u=r(20853),h=r(44857);let p=(0,l.A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var y=r(1466),g=r(92598),f=r(26764),b=r(45686),j=r(5565),v=r(8464),N=r(73453),w=r(61542),k=r(1292),C=r(7660);function S(){let{orders:e,fetchOrders:t,addOrder:r,updateOrder:l,deleteOrder:S}=(0,v.x)(),{products:A,fetchProducts:D}=(0,N.K)(),[O,M]=(0,s.useState)(""),[T,I]=(0,s.useState)("all"),[F,_]=(0,s.useState)("all"),[P,E]=(0,s.useState)("all"),[q,z]=(0,s.useState)("all"),[L,U]=(0,s.useState)(!1),[H,J]=(0,s.useState)(!1),[R,Q]=(0,s.useState)(!1),[V,W]=(0,s.useState)(!1),[Z,K]=(0,s.useState)(null),[X,Y]=(0,s.useState)([]),[B,G]=(0,s.useState)({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""});(0,s.useEffect)(()=>{t(),D()},[t,D]);let $=(e,t)=>{let r=e.reduce((e,t)=>e+t.price*t.quantity,0),a=r-t,s=.1*a;return{subtotal:r,serviceTax:s,total:a+s}},ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=A.find(t=>t.id===e);if(!r)return;let a=t=>{let a=t.findIndex(t=>t.productId===e);if(!(a>=0))return[...t,{productId:r.id,name:r.name,price:r.price,quantity:1}];{let e=[...t];return e[a]={...e[a],quantity:e[a].quantity+1},e}};t?G(e=>({...e,items:a(e.items)})):Y(e=>a(e))},et=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?G(t=>({...t,items:t.items.filter(t=>t.productId!==e)})):Y(t=>t.filter(t=>t.productId!==e))},er=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<1)return;let a=r=>r.map(r=>r.productId===e?{...r,quantity:t}:r);r?G(e=>({...e,items:a(e.items)})):Y(e=>a(e))},ea=async()=>{let e=$(B.items,B.discount);try{await r({...B,status:"pending",subtotal:e.subtotal,serviceTax:e.serviceTax,total:e.total,date:new Date().toISOString().slice(0,16).replace("T"," ")}),U(!1),G({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""})}catch(e){console.error("Failed to add order:",e)}},es=e=>{K(e),Y(e.items),J(!0)},el=e=>{K(e),W(!0)},ed=e=>{K(e),Q(!0)},ei=async()=>{if(!Z)return;let e=$(X,Z.discount);try{await l(Z.id,{items:X,itemCount:X.reduce((e,t)=>e+t.quantity,0),subtotal:e.subtotal,serviceTax:e.serviceTax,total:e.total,status:Z.status}),J(!1),K(null),Y([])}catch(e){console.error("Failed to update order:",e)}},eo=async()=>{if(Z)try{await S(Z.id),Q(!1),K(null)}catch(e){console.error("Failed to delete order:",e)}},en=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ec=e.filter(e=>{let t=e.orderNumber.toLowerCase().includes(O.toLowerCase())||e.customerName.toLowerCase().includes(O.toLowerCase()),r="all"===T||e.status===T,a="all"===P||e.paymentMethod===P,s="all"===q||(e.source||"POS")===q,l=!0;if("all"!==F){let t=new Date(e.date),r=new Date,a=new Date(r);switch(a.setDate(a.getDate()-1),F){case"today":l=t.toDateString()===r.toDateString();break;case"yesterday":l=t.toDateString()===a.toDateString();break;case"week":{let e=new Date(r);e.setDate(e.getDate()-7),l=t>=e}}}return t&&r&&a&&l&&s}),em={total:e.length,pending:e.filter(e=>"pending"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length,todayRevenue:e.filter(e=>"completed"===e.status&&new Date(e.date).toDateString()===new Date().toDateString()).reduce((e,t)=>e+t.total,0)},ex=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?B.items:X,r=$(t,e?B.discount:(null==Z?void 0:Z.discount)||0);return(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsxs)("div",{className:"w-[45%] space-y-4",children:[e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Customer Name"}),(0,a.jsx)("input",{type:"text",value:B.customerName,onChange:e=>G(t=>({...t,customerName:e.target.value})),className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:ring-orders-primary focus:border-orders-primary",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Member ID (Optional)"}),(0,a.jsx)("input",{type:"text",value:B.memberId,onChange:e=>G(t=>({...t,memberId:e.target.value})),className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:ring-orders-primary focus:border-orders-primary"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),(0,a.jsxs)("select",{value:B.paymentMethod,onChange:e=>G(t=>({...t,paymentMethod:e.target.value})),className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:ring-orders-primary focus:border-orders-primary",children:[(0,a.jsx)("option",{value:"cash",children:"Cash"}),(0,a.jsx)("option",{value:"card",children:"Card"})]})]})]}),!e&&Z&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Order Status"}),(0,a.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>K(e=>({...e,status:"pending"})),className:"px-4 py-2 rounded-xl transition-all duration-300 ".concat("pending"===Z.status?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Pending"}),(0,a.jsx)("button",{onClick:()=>K(e=>({...e,status:"completed"})),className:"px-4 py-2 rounded-xl transition-all duration-300 ".concat("completed"===Z.status?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Completed"}),(0,a.jsx)("button",{onClick:()=>K(e=>({...e,status:"cancelled"})),className:"px-4 py-2 rounded-xl transition-all duration-300 ".concat("cancelled"===Z.status?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Cancelled"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Products"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-[500px] overflow-y-auto",children:A.map(t=>(0,a.jsxs)("button",{onClick:()=>ee(t.id,e),className:"flex items-center p-3 border rounded-xl hover:bg-gray-50 hover:border-orders-primary transition-all duration-300 group",children:[(0,a.jsx)(j.default,{src:t.image_url,alt:t.name,className:"rounded-lg object-cover group-hover:scale-105 transition-transform duration-300",width:64,height:64}),(0,a.jsxs)("div",{className:"ml-3 text-left",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:t.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",t.price.toFixed(2)]})]})]},t.id))})]})]}),(0,a.jsxs)("div",{className:"w-[55%] space-y-4",children:[(0,a.jsxs)("div",{className:"border rounded-xl p-4 space-y-4 max-h-[400px] overflow-y-auto bg-gray-50",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Order Items"}),t.map(t=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("button",{onClick:()=>et(t.productId,e),className:"text-red-500 hover:text-red-700 p-1 rounded-lg hover:bg-red-50 transition-colors",children:(0,a.jsx)(d,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:"text-sm flex-1",children:t.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>er(t.productId,t.quantity-1,e),className:"text-gray-500 hover:text-gray-700 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors",children:"-"}),(0,a.jsx)("input",{type:"number",min:"1",value:t.quantity,onChange:r=>er(t.productId,parseInt(r.target.value)||1,e),className:"w-16 text-center border rounded-lg"}),(0,a.jsx)("button",{onClick:()=>er(t.productId,t.quantity+1,e),className:"text-gray-500 hover:text-gray-700 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors",children:"+"})]}),(0,a.jsxs)("span",{className:"text-sm font-medium w-24 text-right",children:["₹",(t.price*t.quantity).toFixed(2)]})]})]},t.productId))]}),(0,a.jsxs)("div",{className:"border rounded-xl p-4 space-y-4 bg-gradient-to-br from-orders-primary/5 to-orders-secondary/5",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Order Summary"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{children:["₹",r.subtotal.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Discount:"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",value:e?B.discount:(null==Z?void 0:Z.discount)||0,onChange:t=>{let r=parseFloat(t.target.value)||0;e&&G(e=>({...e,discount:r}))},className:"w-20 text-right border rounded-lg px-2 py-1"})})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Service Tax (10%):"}),(0,a.jsxs)("span",{children:["₹",r.serviceTax.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-medium text-lg mt-4 pt-4 border-t",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{className:"text-orders-primary",children:["₹",r.total.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-6 pt-4 border-t",children:[(0,a.jsx)("button",{onClick:()=>{e?(U(!1),G({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""})):(J(!1),K(null),Y([]))},className:"px-6 py-3 text-gray-700 hover:text-gray-900 font-medium",children:"Cancel"}),(0,a.jsx)("button",{onClick:e?ea:ei,disabled:0===t.length,className:"px-6 py-3 bg-gradient-to-r from-orders-primary to-orders-secondary text-white rounded-xl hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:e?"Create Order":"Update Order"})]})]})]})};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orders-bg via-orders-bg/30 to-orders-bg/80 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-orders-primary/20 to-orders-secondary/20 rounded-full blur-3xl animate-float"}),(0,a.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-orders-accent/20 to-orders-primary/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-orders-primary/10 to-orders-secondary/10 rounded-full blur-3xl animate-pulse-slow"}),(0,a.jsx)("div",{className:"absolute top-20 right-20 w-32 h-32 bg-shimmer-gradient bg-[length:200%_100%] rounded-full animate-shimmer opacity-30"}),(0,a.jsx)("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-radial-shine rounded-full animate-glow"})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orders-primary to-orders-secondary bg-clip-text text-transparent mb-2",children:"Order Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage customer orders and track sales"})]}),(0,a.jsxs)("button",{onClick:()=>U(!0),className:"bg-gradient-to-r from-orders-primary to-orders-secondary text-white px-6 py-3 rounded-xl flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),"New Order"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-orders-primary to-orders-secondary rounded-2xl p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white/80 text-sm font-medium",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:em.total})]}),(0,a.jsx)(o.A,{className:"h-12 w-12 text-white/30"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Pending"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:em.pending})]}),(0,a.jsx)(n.A,{className:"h-12 w-12 text-blue-300"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Completed"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:em.completed})]}),(0,a.jsx)(c.A,{className:"h-12 w-12 text-green-300"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Cancelled"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-red-600",children:em.cancelled})]}),(0,a.jsx)(m.A,{className:"h-12 w-12 text-red-300"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Today's Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-orders-primary",children:["₹",em.todayRevenue.toFixed(2)]})]}),(0,a.jsx)(x.A,{className:"h-12 w-12 text-orders-primary/30"})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search orders...",value:O,onChange:e=>M(e.target.value),className:"pl-10 pr-4 py-3 border border-gray-300 rounded-xl w-full focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,a.jsxs)("select",{value:F,onChange:e=>_(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,a.jsx)("option",{value:"all",children:"All Dates"}),(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,a.jsx)("option",{value:"week",children:"This Week"})]}),(0,a.jsxs)("select",{value:P,onChange:e=>E(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,a.jsx)("option",{value:"all",children:"All Payments"}),(0,a.jsx)("option",{value:"cash",children:"Cash"}),(0,a.jsx)("option",{value:"card",children:"Card"})]}),(0,a.jsxs)("select",{value:q,onChange:e=>z(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orders-primary focus:border-transparent transition-all duration-300",children:[(0,a.jsx)("option",{value:"all",children:"All Sources"}),(0,a.jsx)("option",{value:"POS",children:"POS"}),(0,a.jsx)("option",{value:"QR",children:"QR Code"})]}),(0,a.jsxs)("button",{onClick:()=>{let t=e.map(e=>({"Order Number":e.orderNumber,Customer:e.customerName,"Member ID":e.memberId||"N/A",Items:e.itemCount,Subtotal:e.subtotal,Discount:e.discount,"Service Tax":e.serviceTax,Total:e.total,Status:e.status,"Payment Method":e.paymentMethod,Date:e.date})),r=C.Wp.json_to_sheet(t),a=C.Wp.book_new();C.Wp.book_append_sheet(a,r,"Orders"),C._h(a,"orders_".concat(new Date().toISOString().split("T")[0],".xlsx"))},className:"bg-gradient-to-r from-orders-primary to-orders-secondary text-white px-6 py-3 rounded-xl flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"Export"]})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow-lg rounded-2xl overflow-hidden border border-gray-100",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-orders-primary/10 to-orders-secondary/10",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ec.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.orderNumber}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(p,{className:"w-3 h-3 mr-1"}),e.paymentMethod]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orders-primary to-orders-secondary rounded-full flex items-center justify-center text-white font-bold mr-3",children:e.customerName.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName}),e.memberId&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(y.A,{className:"w-3 h-3 mr-1"}),e.memberId]})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.itemCount," items"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["₹",e.total.toFixed(2)]}),e.discount>0&&(0,a.jsxs)("div",{className:"text-xs text-green-600",children:["-₹",e.discount.toFixed(2)," discount"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded-md border ".concat("QR"===e.source?"bg-purple-50 text-purple-700 border-purple-200":"bg-cyan-50 text-cyan-700 border-cyan-200"),children:e.source||"POS"})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(en(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>el(e),className:"text-orders-primary hover:text-orders-secondary p-2 rounded-lg hover:bg-orders-primary/10 transition-colors",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>es(e),className:"text-orders-primary hover:text-orders-secondary p-2 rounded-lg hover:bg-orders-primary/10 transition-colors",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>ed(e),className:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),(0,a.jsx)(w.a,{isOpen:L,onClose:()=>{U(!1),G({customerName:"",memberId:"",items:[],paymentMethod:"cash",discount:0,couponCode:""})},title:"New Order",size:"large",children:ex(!0)}),(0,a.jsx)(w.a,{isOpen:H,onClose:()=>{J(!1),K(null),Y([])},title:"Edit Order",size:"large",children:ex(!1)}),(0,a.jsx)(w.a,{isOpen:V,onClose:()=>{W(!1),K(null)},title:"Order Details",size:"large",children:Z&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Order Number"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:Z.orderNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Customer"}),(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900",children:Z.customerName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,a.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(en(Z.status)),children:Z.status.charAt(0).toUpperCase()+Z.status.slice(1)})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900",children:Z.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Payment Method"}),(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900 capitalize",children:Z.paymentMethod})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-orders-primary",children:["₹",Z.total.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Items"}),(0,a.jsx)("div",{className:"space-y-2",children:Z.items.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["₹",e.price.toFixed(2)," each"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Qty: ",e.quantity]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["₹",(e.price*e.quantity).toFixed(2)]})]})]},t))})]})]})}),(0,a.jsx)(k.T,{isOpen:R,onClose:()=>Q(!1),onConfirm:eo,title:"Delete Order",message:"Are you sure you want to delete this order? This action cannot be undone."})]})]})}},1292:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var a=r(95155);r(12115);let s=(0,r(82800).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function l(e){let{isOpen:t,onClose:r,onConfirm:l,title:d,message:i}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(s,{className:"h-6 w-6 text-red-500 mr-2"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:d})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{l(),r()},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}):null}},61542:(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var a=r(95155);r(12115);var s=r(40767);function l(e){let{isOpen:t,onClose:r,title:l,children:d,size:i="default"}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full ".concat("large"===i?"max-w-7xl":"max-w-md"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:l}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:(0,a.jsx)(s.A,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"p-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:d})]})}):null}},37788:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});let a=(0,r(83749).vt)(e=>({members:[],loading:!1,error:null,fetchMembers:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/members");if(!t.ok)throw Error("Failed to fetch members");let r=(await t.json()).map(e=>({...e,joinDate:new Date(e.joinDate).toISOString().split("T")[0]}));e({members:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addMember:async t=>{e({loading:!0,error:null});try{let r=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create member");let a=await r.json(),s={...a,joinDate:new Date(a.joinDate).toISOString().split("T")[0]};return e(e=>({members:[...e.members,s]})),s}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateMember:async(t,r)=>{e({loading:!0,error:null});try{let a=await fetch("/api/members/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to update member");let s=await a.json(),l={...s,joinDate:new Date(s.joinDate).toISOString().split("T")[0]};e(e=>({members:e.members.map(e=>e.id===t?l:e)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},deleteMember:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/members/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete member");e(e=>({members:e.members.filter(e=>e.id!==t)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}}}))},8464:(e,t,r)=>{"use strict";r.d(t,{x:()=>l});var a=r(83749),s=r(37788);let l=(0,a.vt)((e,t)=>({orders:[],loading:!1,error:null,fetchOrders:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/orders");if(!t.ok)throw Error("Failed to fetch orders");let r=(await t.json()).map(e=>({...e,itemCount:e.items.reduce((e,t)=>e+t.quantity,0),date:new Date(e.date).toLocaleString()}));e({orders:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addOrder:async t=>{e({loading:!0,error:null});try{let r={...t,orderNumber:"ORD-".concat(Date.now())},a=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to create order");let s=await a.json(),l={...s,itemCount:s.items.reduce((e,t)=>e+t.quantity,0),date:new Date(s.date).toLocaleString()};e(e=>({orders:[l,...e.orders]})),"completed"===l.status&&l.memberId&&await d(l.memberId,l.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrder:async(r,a)=>{e({loading:!0,error:null});try{let s=await fetch("/api/orders/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok)throw Error("Failed to update order");let l=await s.json(),i={...l,itemCount:l.items.reduce((e,t)=>e+t.quantity,0),date:new Date(l.date).toLocaleString()},o=t().orders.find(e=>e.id===r);e(e=>({orders:e.orders.map(e=>e.id===r?i:e)})),"completed"===a.status&&(null==o?void 0:o.status)!=="completed"&&i.memberId&&await d(i.memberId,i.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrderStatus:async(r,a)=>{e({loading:!0,error:null});try{let s=await fetch("/api/orders/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})});if(!s.ok)throw Error("Failed to update order status");let l=await s.json(),i={...l,itemCount:l.items.reduce((e,t)=>e+t.quantity,0),date:new Date(l.date).toLocaleString()},o=t().orders.find(e=>e.id===r);e(e=>({orders:e.orders.map(e=>e.id===r?i:e)})),"completed"===a&&i.memberId&&(null==o?void 0:o.status)!=="completed"&&await d(i.memberId,i.total)}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteOrder:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/orders/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete order");e(e=>({orders:e.orders.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}));async function d(e,t){let r=s.b.getState(),a=r.members.find(t=>t.memberId===e);if(a){let e=1*Math.floor(t/100);await r.updateMember(a.id,{points:a.points+e,totalSpent:a.totalSpent+t})}}},73453:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});let a=(0,r(83749).vt)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/products");if(!t.ok)throw Error("Failed to fetch products");let r=(await t.json()).map(e=>({...e,image_url:e.imageUrl||e.image_url,cost_price:e.costPrice||e.cost_price,profit_margin:e.profitMargin||e.profit_margin,is_featured:e.isFeatured,is_available:e.isAvailable}));e({products:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addProduct:async t=>{e({loading:!0,error:null});try{let r=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create product");let s=await r.json(),l={...s,image_url:s.imageUrl,cost_price:s.costPrice,profit_margin:s.profitMargin,is_featured:s.isFeatured,is_available:s.isAvailable};e(e=>({products:[l,...e.products]})),await a.getState().fetchProducts()}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateProduct:async(t,r)=>{e({loading:!0,error:null});try{let a=await fetch("/api/products/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to update product");let s=await a.json(),l={...s,image_url:s.imageUrl,cost_price:s.costPrice,profit_margin:s.profitMargin,is_featured:s.isFeatured,is_available:s.isAvailable};e(e=>({products:e.products.map(e=>e.id===t?l:e)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteProduct:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/products/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete product");e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[3524,6422,8441,1517,7358],()=>t(37378)),_N_E=e.O()}]);