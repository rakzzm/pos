(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7911],{57921:(e,t,r)=>{Promise.resolve().then(r.bind(r,61300))},98867:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},16233:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},77568:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},20853:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18474:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1466:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},67072:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82800).A)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},61300:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(95155),s=r(12115),l=r(67072),o=r(20853),i=r(18474),d=r(1466),n=r(16233),c=r(77568),m=r(98867),h=r(73453),p=r(8464),x=r(5565);function y(){let{products:e,fetchProducts:t}=(0,h.K)(),{addOrder:r}=(0,p.x)(),[y,g]=(0,s.useState)([]),[f,b]=(0,s.useState)("cash"),[w,j]=(0,s.useState)(""),[v,N]=(0,s.useState)("All"),[k,S]=(0,s.useState)("Walk-in Customer");(0,s.useEffect)(()=>{t()},[t]);let C=["All",...Array.from(new Set(e.map(e=>e.category)))],A=e.filter(e=>{let t=e.name.toLowerCase().includes(w.toLowerCase()),r="All"===v||e.category===v;return t&&r}),_=e=>{y.find(t=>t.id===e.id)?g(y.map(t=>t.id===e.id?{...t,qty:t.qty+1}:t)):g([...y,{id:e.id,name:e.name,price:e.price,qty:1}])},O=e=>{g(y.filter(t=>t.id!==e))},E=(e,t)=>{t<1?O(e):g(y.map(r=>r.id===e?{...r,qty:t}:r))},T=y.reduce((e,t)=>e+t.price*t.qty,0),F=.1*T,M=T+F,q=async()=>{if(0!==y.length)try{await r({customerName:k,items:y.map(e=>({productId:e.id,name:e.name,price:e.price,quantity:e.qty})),status:"completed",paymentMethod:f,subtotal:T,discount:0,serviceTax:F,total:M,date:new Date().toISOString(),source:"POS"}),alert("Order placed successfully! Total: ₹".concat(M.toFixed(2))),g([]),S("Walk-in Customer")}catch(e){alert("Failed to place order"),console.error(e)}};return(0,a.jsxs)("div",{className:"h-screen flex bg-gradient-to-br from-cyan-50 to-blue-50",children:[(0,a.jsxs)("div",{className:"flex-1 p-6 flex flex-col h-full overflow-hidden",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent mb-2 flex items-center gap-3",children:[(0,a.jsx)(l.A,{className:"h-10 w-10 text-cyan-600"}),"Smart POS"]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search products...",value:w,onChange:e=>j(e.target.value),className:"pl-10 pr-4 py-2 w-full rounded-xl border-none shadow-sm focus:ring-2 focus:ring-cyan-500"})]}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:C.map(e=>(0,a.jsx)("button",{onClick:()=>N(e),className:"px-4 py-2 rounded-xl whitespace-nowrap transition-all ".concat(v===e?"bg-cyan-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-cyan-50"),children:e},e))})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto pr-2",children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:A.map(e=>{var t;return(0,a.jsxs)("button",{onClick:()=>_(e),className:"bg-white rounded-2xl p-4 shadow-lg hover:shadow-xl hover:scale-105 transition-all border-2 border-transparent hover:border-cyan-500 group text-left relative overflow-hidden",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-100 rounded-xl mb-3 relative overflow-hidden",children:e.image_url?(0,a.jsx)(x.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover group-hover:scale-110 transition-transform duration-300"}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-300",children:(0,a.jsx)(i.A,{className:"h-12 w-12"})})}),(0,a.jsx)("h3",{className:"font-bold text-gray-900 text-sm mb-1 line-clamp-1",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.category}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-cyan-600",children:["₹",e.price.toFixed(2)]}),y.find(t=>t.id===e.id)&&(0,a.jsx)("span",{className:"bg-cyan-100 text-cyan-700 text-xs font-bold px-2 py-1 rounded-full",children:null===(t=y.find(t=>t.id===e.id))||void 0===t?void 0:t.qty})]})]},e.id)})})})]}),(0,a.jsxs)("div",{className:"w-96 bg-white shadow-2xl flex flex-col border-l border-gray-100",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Current Order"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 p-3 rounded-xl",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>S(e.target.value),className:"bg-transparent border-none focus:ring-0 w-full font-medium text-gray-700",placeholder:"Customer Name"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:0===y.length?(0,a.jsxs)("div",{className:"text-center py-12 flex flex-col items-center justify-center h-full",children:[(0,a.jsx)("div",{className:"bg-cyan-50 p-6 rounded-full mb-4",children:(0,a.jsx)(i.A,{className:"h-12 w-12 text-cyan-300"})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"Cart is empty"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Add items from the menu"})]}):y.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center gap-3 group hover:bg-cyan-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["₹",e.price.toFixed(2)," each"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>E(e.id,e.qty-1),className:"w-8 h-8 bg-white border border-gray-200 rounded-lg hover:border-cyan-500 hover:text-cyan-600 flex items-center justify-center transition-all disabled:opacity-50",children:"-"}),(0,a.jsx)("span",{className:"w-6 text-center font-bold text-gray-700",children:e.qty}),(0,a.jsx)("button",{onClick:()=>E(e.id,e.qty+1),className:"w-8 h-8 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 flex items-center justify-center transition-all shadow-md",children:"+"})]})]},e.id))}),y.length>0&&(0,a.jsxs)("div",{className:"bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[(0,a.jsxs)("div",{className:"p-6 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2 pb-4 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,a.jsxs)("span",{className:"font-semibold",children:["₹",T.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Tax (10%):"}),(0,a.jsxs)("span",{className:"font-semibold",children:["₹",F.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{className:"text-cyan-600",children:["₹",M.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>b("cash"),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-1 ".concat("cash"===f?"border-cyan-600 bg-cyan-50 text-cyan-700":"border-gray-200 hover:border-gray-300 text-gray-600"),children:[(0,a.jsx)(u,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-xs font-bold",children:"Cash"})]}),(0,a.jsxs)("button",{onClick:()=>b("card"),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-1 ".concat("card"===f?"border-cyan-600 bg-cyan-50 text-cyan-700":"border-gray-200 hover:border-gray-300 text-gray-600"),children:[(0,a.jsx)(n.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-xs font-bold",children:"Card"})]}),(0,a.jsxs)("button",{onClick:()=>b("upi"),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-1 ".concat("upi"===f?"border-cyan-600 bg-cyan-50 text-cyan-700":"border-gray-200 hover:border-gray-300 text-gray-600"),children:[(0,a.jsx)(c.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-xs font-bold",children:"UPI"})]})]}),(0,a.jsxs)("button",{onClick:q,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 text-white py-4 rounded-xl font-bold text-lg hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2 active:scale-95",children:[(0,a.jsx)(m.A,{className:"h-6 w-6"}),"Complete Order"]})]})]})]})]})}function u(e){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,a.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,a.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}},37788:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});let a=(0,r(83749).vt)(e=>({members:[],loading:!1,error:null,fetchMembers:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/members");if(!t.ok)throw Error("Failed to fetch members");let r=(await t.json()).map(e=>({...e,joinDate:new Date(e.joinDate).toISOString().split("T")[0]}));e({members:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addMember:async t=>{e({loading:!0,error:null});try{let r=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create member");let a=await r.json(),s={...a,joinDate:new Date(a.joinDate).toISOString().split("T")[0]};return e(e=>({members:[...e.members,s]})),s}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateMember:async(t,r)=>{e({loading:!0,error:null});try{let a=await fetch("/api/members/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to update member");let s=await a.json(),l={...s,joinDate:new Date(s.joinDate).toISOString().split("T")[0]};e(e=>({members:e.members.map(e=>e.id===t?l:e)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},deleteMember:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/members/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete member");e(e=>({members:e.members.filter(e=>e.id!==t)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}}}))},8464:(e,t,r)=>{"use strict";r.d(t,{x:()=>l});var a=r(83749),s=r(37788);let l=(0,a.vt)((e,t)=>({orders:[],loading:!1,error:null,fetchOrders:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/orders");if(!t.ok)throw Error("Failed to fetch orders");let r=(await t.json()).map(e=>({...e,itemCount:e.items.reduce((e,t)=>e+t.quantity,0),date:new Date(e.date).toLocaleString()}));e({orders:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addOrder:async t=>{e({loading:!0,error:null});try{let r={...t,orderNumber:"ORD-".concat(Date.now())},a=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to create order");let s=await a.json(),l={...s,itemCount:s.items.reduce((e,t)=>e+t.quantity,0),date:new Date(s.date).toLocaleString()};e(e=>({orders:[l,...e.orders]})),"completed"===l.status&&l.memberId&&await o(l.memberId,l.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrder:async(r,a)=>{e({loading:!0,error:null});try{let s=await fetch("/api/orders/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok)throw Error("Failed to update order");let l=await s.json(),i={...l,itemCount:l.items.reduce((e,t)=>e+t.quantity,0),date:new Date(l.date).toLocaleString()},d=t().orders.find(e=>e.id===r);e(e=>({orders:e.orders.map(e=>e.id===r?i:e)})),"completed"===a.status&&(null==d?void 0:d.status)!=="completed"&&i.memberId&&await o(i.memberId,i.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrderStatus:async(r,a)=>{e({loading:!0,error:null});try{let s=await fetch("/api/orders/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})});if(!s.ok)throw Error("Failed to update order status");let l=await s.json(),i={...l,itemCount:l.items.reduce((e,t)=>e+t.quantity,0),date:new Date(l.date).toLocaleString()},d=t().orders.find(e=>e.id===r);e(e=>({orders:e.orders.map(e=>e.id===r?i:e)})),"completed"===a&&i.memberId&&(null==d?void 0:d.status)!=="completed"&&await o(i.memberId,i.total)}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteOrder:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/orders/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete order");e(e=>({orders:e.orders.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}));async function o(e,t){let r=s.b.getState(),a=r.members.find(t=>t.memberId===e);if(a){let e=1*Math.floor(t/100);await r.updateMember(a.id,{points:a.points+e,totalSpent:a.totalSpent+t})}}},73453:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});let a=(0,r(83749).vt)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/products");if(!t.ok)throw Error("Failed to fetch products");let r=(await t.json()).map(e=>({...e,image_url:e.imageUrl||e.image_url,cost_price:e.costPrice||e.cost_price,profit_margin:e.profitMargin||e.profit_margin,is_featured:e.isFeatured,is_available:e.isAvailable}));e({products:r})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addProduct:async t=>{e({loading:!0,error:null});try{let r=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to create product");let s=await r.json(),l={...s,image_url:s.imageUrl,cost_price:s.costPrice,profit_margin:s.profitMargin,is_featured:s.isFeatured,is_available:s.isAvailable};e(e=>({products:[l,...e.products]})),await a.getState().fetchProducts()}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateProduct:async(t,r)=>{e({loading:!0,error:null});try{let a=await fetch("/api/products/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to update product");let s=await a.json(),l={...s,image_url:s.imageUrl,cost_price:s.costPrice,profit_margin:s.profitMargin,is_featured:s.isFeatured,is_available:s.isAvailable};e(e=>({products:e.products.map(e=>e.id===t?l:e)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteProduct:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/products/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete product");e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[6422,8441,1517,7358],()=>t(57921)),_N_E=e.O()}]);