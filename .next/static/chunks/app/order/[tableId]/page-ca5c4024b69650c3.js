(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2823],{63769:(e,t,a)=>{Promise.resolve().then(a.bind(a,70339))},98867:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(82800).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},33473:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(82800).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18474:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(82800).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},76046:(e,t,a)=>{"use strict";var r=a(66658);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},70339:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(95155),s=a(12115),l=a(76046),i=a(5565),o=a(82800);let n=(0,o.A)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);var d=a(18474),c=a(98867),m=a(33473);let h=(0,o.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),u=(0,o.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=a(73453),g=a(8464);function x(){let e=(0,l.useParams)(),t=null==e?void 0:e.tableId,a=t?t.replace(/\D/g,"")||t:"",{products:o}=(0,p.K)(),{addOrder:x}=(0,g.x)(),[f,y]=(0,s.useState)([]),[b,w]=(0,s.useState)(""),[j,N]=(0,s.useState)("All"),[v,k]=(0,s.useState)(!1),[S,P]=(0,s.useState)(!1),A=["All",...Array.from(new Set(o.map(e=>e.category)))],C="All"===j?o:o.filter(e=>e.category===j),E=e=>{f.find(t=>t.productId===e.id)?y(f.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t)):y([...f,{productId:e.id,name:e.name,price:e.price,quantity:1}])},T=e=>{let t=f.find(t=>t.productId===e);t&&t.quantity>1?y(f.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t)):y(f.filter(t=>t.productId!==e))},_=f.reduce((e,t)=>e+t.price*t.quantity,0),O=f.reduce((e,t)=>e+t.quantity,0),F=async()=>{if(0===f.length){alert("Please add items to your cart");return}if(!b.trim()){alert("Please enter your name");return}let e=.1*_,t=_+e;try{await x({customerName:"".concat(b," (Table ").concat(a,")"),items:f.map(e=>({productId:e.productId,name:e.name,price:e.price,quantity:e.quantity})),status:"pending",paymentMethod:"pending",subtotal:_,discount:0,serviceTax:e,total:t,date:new Date().toISOString().slice(0,16).replace("T"," "),source:"QR"}),P(!0),setTimeout(()=>{y([]),w(""),P(!1),k(!1)},3e3)}catch(e){alert("Failed to place order. Please try again.")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-yellow-50",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-yellow-600 text-white sticky top-0 z-40 shadow-lg",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(n,{className:"h-8 w-8"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Restaurant Menu"}),(0,r.jsxs)("p",{className:"text-sm text-orange-100",children:["Table ",a]})]})]}),(0,r.jsxs)("button",{onClick:()=>k(!v),className:"relative bg-white/20 backdrop-blur-sm p-3 rounded-full hover:bg-white/30 transition-all",children:[(0,r.jsx)(d.A,{className:"h-6 w-6"}),O>0&&(0,r.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center",children:O})]})]})})}),S&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center animate-bounce-slow",children:[(0,r.jsx)("div",{className:"bg-green-100 rounded-full p-4 w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-12 w-12 text-green-600"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Placed!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Your order has been sent to the kitchen. We'll bring it to your table soon!"})]})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,r.jsx)("div",{className:"mb-6 overflow-x-auto",children:(0,r.jsx)("div",{className:"flex gap-2 pb-2",children:A.map(e=>(0,r.jsx)("button",{onClick:()=>N(e),className:"px-6 py-2 rounded-full font-medium whitespace-nowrap transition-all ".concat(j===e?"bg-gradient-to-r from-orange-600 to-yellow-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-orange-50"),children:e},e))})}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:C.map(e=>{let t=f.find(t=>t.productId===e.id),a=(null==t?void 0:t.quantity)||0;return(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all transform hover:scale-105",children:[(0,r.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.image_url?(0,r.jsx)(i.default,{src:e.image_url,alt:e.name,className:"object-cover",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(n,{className:"h-16 w-16 text-gray-400"})}),a>0&&(0,r.jsx)("div",{className:"absolute top-2 right-2 bg-orange-600 text-white px-3 py-1 rounded-full font-bold shadow-lg",children:a})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:["₹",e.price.toFixed(2)]}),0===a?(0,r.jsxs)("button",{onClick:()=>E(e),className:"bg-gradient-to-r from-orange-600 to-yellow-600 text-white px-4 py-2 rounded-lg font-semibold hover:from-orange-700 hover:to-yellow-700 transition-all shadow-md flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),"Add"]}):(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>T(e.id),className:"bg-gray-200 text-gray-700 p-2 rounded-lg hover:bg-gray-300 transition-all",children:(0,r.jsx)(h,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"font-bold text-lg",children:a}),(0,r.jsx)("button",{onClick:()=>E(e),className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition-all",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]})]})]},e.id)})})]}),(0,r.jsx)("div",{className:"fixed top-0 right-0 h-full w-full sm:w-96 bg-white shadow-2xl z-50 transform transition-transform duration-300 ".concat(v?"translate-x-0":"translate-x-full"),children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-yellow-600 text-white p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"h-6 w-6"}),"Your Order"]}),(0,r.jsx)("button",{onClick:()=>k(!1),className:"bg-white/20 backdrop-blur-sm p-2 rounded-full hover:bg-white/30 transition-all",children:(0,r.jsx)(u,{className:"h-5 w-5"})})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===f.length?(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,r.jsx)(d.A,{className:"h-16 w-16 mb-4"}),(0,r.jsx)("p",{className:"text-lg",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-sm",children:"Add items from the menu"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),(0,r.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),placeholder:"Enter your name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["₹",e.price.toFixed(2)," each"]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"font-bold text-orange-600",children:["₹",(e.price*e.quantity).toFixed(2)]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>T(e.productId),className:"bg-gray-200 text-gray-700 p-1 rounded hover:bg-gray-300 transition-all",children:(0,r.jsx)(h,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"font-semibold text-gray-900 w-8 text-center",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>E({id:e.productId,name:e.name,price:e.price}),className:"bg-orange-600 text-white p-1 rounded hover:bg-orange-700 transition-all",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]},e.productId))})]})}),f.length>0&&(0,r.jsxs)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"font-medium",children:["₹",_.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Service Tax (10%)"}),(0,r.jsxs)("span",{className:"font-medium",children:["₹",(.1*_).toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-orange-600",children:["₹",(1.1*_).toFixed(2)]})]})]}),(0,r.jsx)("button",{onClick:F,disabled:!b.trim(),className:"w-full bg-gradient-to-r from-orange-600 to-yellow-600 text-white py-3 rounded-lg font-bold text-lg hover:from-orange-700 hover:to-yellow-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Order"})]})]})})]})}},37788:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});let r=(0,a(83749).vt)(e=>({members:[],loading:!1,error:null,fetchMembers:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/members");if(!t.ok)throw Error("Failed to fetch members");let a=(await t.json()).map(e=>({...e,joinDate:new Date(e.joinDate).toISOString().split("T")[0]}));e({members:a})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addMember:async t=>{e({loading:!0,error:null});try{let a=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to create member");let r=await a.json(),s={...r,joinDate:new Date(r.joinDate).toISOString().split("T")[0]};return e(e=>({members:[...e.members,s]})),s}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateMember:async(t,a)=>{e({loading:!0,error:null});try{let r=await fetch("/api/members/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error("Failed to update member");let s=await r.json(),l={...s,joinDate:new Date(s.joinDate).toISOString().split("T")[0]};e(e=>({members:e.members.map(e=>e.id===t?l:e)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},deleteMember:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/members/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete member");e(e=>({members:e.members.filter(e=>e.id!==t)}))}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}}}))},8464:(e,t,a)=>{"use strict";a.d(t,{x:()=>l});var r=a(83749),s=a(37788);let l=(0,r.vt)((e,t)=>({orders:[],loading:!1,error:null,fetchOrders:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/orders");if(!t.ok)throw Error("Failed to fetch orders");let a=(await t.json()).map(e=>({...e,itemCount:e.items.reduce((e,t)=>e+t.quantity,0),date:new Date(e.date).toLocaleString()}));e({orders:a})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addOrder:async t=>{e({loading:!0,error:null});try{let a={...t,orderNumber:"ORD-".concat(Date.now())},r=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error("Failed to create order");let s=await r.json(),l={...s,itemCount:s.items.reduce((e,t)=>e+t.quantity,0),date:new Date(s.date).toLocaleString()};e(e=>({orders:[l,...e.orders]})),"completed"===l.status&&l.memberId&&await i(l.memberId,l.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrder:async(a,r)=>{e({loading:!0,error:null});try{let s=await fetch("/api/orders/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error("Failed to update order");let l=await s.json(),o={...l,itemCount:l.items.reduce((e,t)=>e+t.quantity,0),date:new Date(l.date).toLocaleString()},n=t().orders.find(e=>e.id===a);e(e=>({orders:e.orders.map(e=>e.id===a?o:e)})),"completed"===r.status&&(null==n?void 0:n.status)!=="completed"&&o.memberId&&await i(o.memberId,o.total)}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},updateOrderStatus:async(a,r)=>{e({loading:!0,error:null});try{let s=await fetch("/api/orders/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})});if(!s.ok)throw Error("Failed to update order status");let l=await s.json(),o={...l,itemCount:l.items.reduce((e,t)=>e+t.quantity,0),date:new Date(l.date).toLocaleString()},n=t().orders.find(e=>e.id===a);e(e=>({orders:e.orders.map(e=>e.id===a?o:e)})),"completed"===r&&o.memberId&&(null==n?void 0:n.status)!=="completed"&&await i(o.memberId,o.total)}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteOrder:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/orders/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete order");e(e=>({orders:e.orders.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}));async function i(e,t){let a=s.b.getState(),r=a.members.find(t=>t.memberId===e);if(r){let e=1*Math.floor(t/100);await a.updateMember(r.id,{points:r.points+e,totalSpent:r.totalSpent+t})}}},73453:(e,t,a)=>{"use strict";a.d(t,{K:()=>r});let r=(0,a(83749).vt)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/products");if(!t.ok)throw Error("Failed to fetch products");let a=(await t.json()).map(e=>({...e,image_url:e.imageUrl||e.image_url,cost_price:e.costPrice||e.cost_price,profit_margin:e.profitMargin||e.profit_margin,is_featured:e.isFeatured,is_available:e.isAvailable}));e({products:a})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addProduct:async t=>{e({loading:!0,error:null});try{let a=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to create product");let s=await a.json(),l={...s,image_url:s.imageUrl,cost_price:s.costPrice,profit_margin:s.profitMargin,is_featured:s.isFeatured,is_available:s.isAvailable};e(e=>({products:[l,...e.products]})),await r.getState().fetchProducts()}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateProduct:async(t,a)=>{e({loading:!0,error:null});try{let r=await fetch("/api/products/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error("Failed to update product");let s=await r.json(),l={...s,image_url:s.imageUrl,cost_price:s.costPrice,profit_margin:s.profitMargin,is_featured:s.isFeatured,is_available:s.isAvailable};e(e=>({products:e.products.map(e=>e.id===t?l:e)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteProduct:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/products/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete product");e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[6422,8441,1517,7358],()=>t(63769)),_N_E=e.O()}]);