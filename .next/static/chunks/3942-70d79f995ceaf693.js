"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3942],{82800:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(12115),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{color:l="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:f="",children:u,...y}=a;return(0,r.createElement)("svg",{ref:i,...n,width:s,height:s,stroke:l,strokeWidth:d?24*Number(c)/Number(s):c,className:["lucide","lucide-".concat(o(e)),f].join(" "),...y},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])});return a.displayName="".concat(e),a}},26764:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82800).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},45686:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82800).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},73027:(e,t,a)=>{var r=a(12115),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,i=r.useEffect,l=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!n(e,a)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=o({inst:{value:a,getSnapshot:t}}),n=r[0].inst,d=r[1];return l(function(){n.value=a,n.getSnapshot=t,c(n)&&d({inst:n})},[e,a,t]),i(function(){return c(n)&&d({inst:n}),e(function(){c(n)&&d({inst:n})})},[e]),s(a),a};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},44564:(e,t,a)=>{var r=a(12115),n=a(94236),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,l=r.useRef,s=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,r,n){var f=l(null);if(null===f.current){var u={hasValue:!1,value:null};f.current=u}else u=f.current;var y=i(e,(f=c(function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==n&&u.hasValue){var t=u.value;if(n(t,e))return l=t}return l=e}if(t=l,o(i,e))return t;var a=r(e);return void 0!==n&&n(t,a)?(i=e,t):(i=e,l=a)}var i,l,s=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,r,n]))[0],f[1]);return s(function(){u.hasValue=!0,u.value=y},[y]),d(y),y}},94236:(e,t,a)=>{e.exports=a(73027)},18010:(e,t,a)=>{e.exports=a(44564)},24114:(e,t,a)=>{a.d(t,{L:()=>r});let r=(0,a(83749).vt)((e,t)=>({staff:[],leaveRequests:[],payrollRecords:[],attendanceRecords:[],loading:!1,error:null,fetchStaff:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/staff");if(!t.ok)throw Error("Failed to fetch staff");let a=await t.json(),r=a.map(e=>({id:e.id,employeeId:e.employeeId,name:e.name,email:e.email,phone:e.phone,position:e.position,department:e.department,hireDate:new Date(e.hireDate).toISOString().split("T")[0],salary:e.salary,status:e.status,leaveBalance:{annual:e.leaveBalanceAnnual,sick:e.leaveBalanceSick,personal:e.leaveBalancePersonal},performance:{rating:e.performanceRating,lastReview:e.lastReview?new Date(e.lastReview).toISOString().split("T")[0]:""}})),n=[];a.forEach(e=>{e.leaveRequests&&Array.isArray(e.leaveRequests)&&e.leaveRequests.forEach(t=>{n.push({id:t.id,staffId:e.id,staffName:e.name,type:t.type,startDate:new Date(t.startDate).toISOString().split("T")[0],endDate:new Date(t.endDate).toISOString().split("T")[0],days:Math.ceil((new Date(t.endDate).getTime()-new Date(t.startDate).getTime())/864e5)+1,reason:t.reason,status:t.status,appliedDate:new Date(t.appliedDate).toISOString().split("T")[0]})})}),e({staff:r,leaveRequests:n})}catch(t){e({error:t.message})}finally{e({loading:!1})}},addStaff:async a=>{e({loading:!0,error:null});try{if(!(await fetch("/api/staff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to create staff");await t().fetchStaff()}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateStaff:async(a,r)=>{e({loading:!0,error:null});try{let e={...r};if(r.leaveBalance&&(e.leaveBalance={...r.leaveBalance}),!(await fetch("/api/staff/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update staff");await t().fetchStaff()}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteStaff:async t=>{e({loading:!0,error:null});try{if(!(await fetch("/api/staff/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete staff");e(e=>({staff:e.staff.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateLeaveRequest:async(a,r)=>{e({loading:!0});try{await fetch("/api/leave-requests/".concat(a),{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),await t().fetchStaff()}catch(e){console.error(e)}finally{e({loading:!1})}},fetchPayroll:async()=>{e({loading:!0,error:null});try{let t=await fetch("/api/payroll");if(!t.ok)throw Error("Failed to fetch payroll");let a=(await t.json()).map(e=>({...e,payPeriodStart:new Date(e.payPeriodStart).toISOString().split("T")[0],payPeriodEnd:new Date(e.payPeriodEnd).toISOString().split("T")[0],payDate:new Date(e.payDate).toISOString().split("T")[0]}));e({payrollRecords:a})}catch(t){e({error:t.message})}finally{e({loading:!1})}},runPayroll:async(a,r,n,o,i)=>{e({loading:!0,error:null});try{if(!(await fetch("/api/payroll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staffId:a,periodStart:r,periodEnd:n,bonuses:o,deductions:i})})).ok)throw Error("Failed to run payroll");await t().fetchPayroll()}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},markPayrollPaid:async(a,r)=>{e({loading:!0,error:null});try{if(!(await fetch("/api/payroll/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"paid",paymentMethod:r})})).ok)throw Error("Failed to update payroll");await t().fetchPayroll()}catch(t){e({error:t.message})}finally{e({loading:!1})}},fetchAttendance:async t=>{e({loading:!0,error:null});try{let a="/api/attendance";t&&(a+="?month=".concat(t));let r=await fetch(a);if(!r.ok)throw Error("Failed to fetch attendance");let n=(await r.json()).map(e=>{var t;return{...e,date:new Date(e.date).toISOString().split("T")[0],staffName:null===(t=e.staff)||void 0===t?void 0:t.name}});e({attendanceRecords:n})}catch(t){e({error:t.message})}finally{e({loading:!1})}},clockIn:async a=>{e({loading:!0,error:null});try{let e=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r=await fetch("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"clock-in",staffId:a,time:e})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to clock in")}await t().fetchAttendance()}catch(t){throw e({error:t.message}),t}finally{e({loading:!1})}},clockOut:async(a,r,n)=>{e({loading:!0,error:null});try{if(!(await fetch("/api/attendance/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"clock-out",time:r,totalHours:n})})).ok)throw Error("Failed to clock out");await t().fetchAttendance()}catch(t){e({error:t.message})}finally{e({loading:!1})}},addAttendance:async a=>{e({loading:!0});try{if(!(await fetch("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"manual",...a})})).ok)throw Error("Failed to add record");await t().fetchAttendance()}catch(t){e({error:t.message})}finally{e({loading:!1})}},updateAttendance:async(a,r)=>{e({loading:!0});try{if(!(await fetch("/api/attendance/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to update record");await t().fetchAttendance()}catch(t){e({error:t.message})}finally{e({loading:!1})}},deleteAttendance:async t=>{e({loading:!0});try{if(!(await fetch("/api/attendance/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete record");e(e=>({attendanceRecords:e.attendanceRecords.filter(e=>e.id!==t)}))}catch(t){e({error:t.message})}finally{e({loading:!1})}}}))},83749:(e,t,a)=>{a.d(t,{vt:()=>u});let r=e=>{let t;let a=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),a.forEach(a=>a(t,e))}},n=()=>t,o={setState:r,getState:n,getInitialState:()=>i,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},i=t=e(r,n,o);return o},n=e=>e?r(e):r;var o=a(12115),i=a(18010);let{useDebugValue:l}=o,{useSyncExternalStoreWithSelector:s}=i,c=!1,d=e=>e,f=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?n(e):e,a=(e,a)=>(function(e,t=d,a){a&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let r=s(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return l(r),r})(t,e,a);return Object.assign(a,t),a},u=e=>e?f(e):f}}]);